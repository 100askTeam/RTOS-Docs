import{_ as t,o as e,c as a,e as p}from"./app-a3aa5aa8.js";const r={},h=p('<h1 id="第4章-开发板使用" tabindex="-1"><a class="header-anchor" href="#第4章-开发板使用" aria-hidden="true">#</a> 第4章 开发板使用</h1><h2 id="_4-1-硬件连接" tabindex="-1"><a class="header-anchor" href="#_4-1-硬件连接" aria-hidden="true">#</a> 4.1 硬件连接</h2><h3 id="_4-1-1-连接st-link" tabindex="-1"><a class="header-anchor" href="#_4-1-1-连接st-link" aria-hidden="true">#</a> 4.1.1 连接ST-Link</h3><p>本课程使用ST-Link给开发板供电、烧录、调试。</p><p>DshanMCU-103上有4个插针，它们分别是GND、SWCLK、SWDIO、3.3V。ST-Link上有10个插针，它们的功能在外壳上有标注。接线方法如下图所示：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image1.png" alt=""></p><p>连接好的实物图像如下（ST-Link的USB口要插到电脑上）：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image2.png" alt=""></p><h3 id="_4-1-2-连接usb串口" tabindex="-1"><a class="header-anchor" href="#_4-1-2-连接usb串口" aria-hidden="true">#</a> 4.1.2 连接USB串口</h3><p>本课程后面部分会使用串口来打印信息，请按照下图连线：底板的TXD、RXD和USB串口RXD、TXD交叉连接，GND要互相连接。</p><p>注意：ST-Link也要保持连接，我们使用ST-Link进行供电、烧录、调试。</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image3.png" alt=""></p><h2 id="_4-2-编译、下载、运行" tabindex="-1"><a class="header-anchor" href="#_4-2-编译、下载、运行" aria-hidden="true">#</a> 4.2 编译、下载、运行</h2><h3 id="_4-2-1-编译工程" tabindex="-1"><a class="header-anchor" href="#_4-2-1-编译工程" aria-hidden="true">#</a> 4.2.1 编译工程</h3><p>把开发板配套资料中如下程序复制到“目录名里没有空格、没有中文字符”的目录下并解压开：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image4.png" alt=""></p><p>在工程的“MDK-ARM”目录下，双击如下文件，就会使用Keil打开工程：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image5.png" alt=""></p><p>在Keil界面，点击一下红框中任意一个按钮即可编译程序：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image6.png" alt=""></p><p>左边的按钮名为“Build”，点击这个按钮后，这些文件将会被编译：</p><ul><li>所有没有被编译过的C文件</li><li>所被修改了但是尚未再次编译的C文件</li></ul><p>如果你曾经编译过工程，但是只是修改了某些文件，使用“Buld”按钮时，只会编译这些被修改的文件，这会加快编译速度。</p><p>右边的按钮名为“Rebuild”，点击这个按钮后，所有的文件都会被再次编译。</p><h3 id="_4-2-2-配置调试器" tabindex="-1"><a class="header-anchor" href="#_4-2-2-配置调试器" aria-hidden="true">#</a> 4.2.2 配置调试器</h3><p>先点击如下图所示按钮：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image7.png" alt=""></p><p>然后如下图依次点击“Debug”，选择“ST-Link Debugger”，点击“Setting”（可能会一是升级固件，见本节后面部分）：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image8.png" alt=""></p><p>如一切正常，ST-Link会自动识别出芯片，如下图所示：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image9.png" alt=""></p><p>然后入下图选择：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image10.png" alt=""></p><p>注意：如果你的ST-Link是第1次使用，它的固件可能已经很老了。设置调试器时可能会提示升级固件。如下图所示：点击“Yes”表示升级：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image11.png" alt=""></p><p>然后会弹出升级界面，点击“Device Connect”，表示连接设备；再点击“Yes”开始升级。如下图所示：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image12.png" alt=""></p><h3 id="_4-2-3-烧录运行" tabindex="-1"><a class="header-anchor" href="#_4-2-3-烧录运行" aria-hidden="true">#</a> 4.2.3 烧录运行</h3><p>点击如下按钮，即可烧写、运行程序：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image13.png" alt=""></p><p>如果一切正常，可以看到DshanMCU-103上的LED闪烁。</p><h2 id="_4-3-修改代码" tabindex="-1"><a class="header-anchor" href="#_4-3-修改代码" aria-hidden="true">#</a> 4.3 修改代码</h2><p>“01_freertos_template”里已经支持了所有的模块，这些模块不能同时测试。要测试哪个模块，需要如下图修改代码：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image14.png" alt=""></p><h2 id="_4-4-注意事项" tabindex="-1"><a class="header-anchor" href="#_4-4-注意事项" aria-hidden="true">#</a> 4.4 注意事项</h2><p>有些模块的引脚是共用的，所以它们要么不能同时接，要么不能同时使用。打开底板原理图，里面有说明：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image15.png" alt=""></p><p>为方便大家使用，列表如下：</p><table><thead><tr><th><em><strong>*模块1*</strong></em></th><th><em><strong>*模块2*</strong></em></th><th><em><strong>*备注*</strong></em></th></tr></thead><tbody><tr><td>M2(DS18B20)</td><td>M10(DHT11温湿度模块)</td><td>不能同时接</td></tr><tr><td>M4(红外发射模块)</td><td>M9(蜂鸣器)</td><td>不能同时接</td></tr><tr><td>M6(超声波模块)</td><td>M12(Flash模块)</td><td>可以同时接，但是不能同时访问</td></tr></tbody></table><p>图示如下：</p><p><img src="http://photos.100ask.net/rtos-docs/FreeRTOS/DShanMCU-F103/chapter-4/image16.png" alt=""></p>',51),s=[h];function n(i,o){return e(),a("div",null,s)}const c=t(r,[["render",n],["__file","chapter4.html.vue"]]);export{c as default};
